import pygame
import csv
from world_gen import world_output



windowWidth = 800
windowHeight = 600
TILE_SIZE = 32
FPS = 60
BLOCKS_LAYER = 2
GROUND_LAYER = 1
PLAYER_LAYER = 6
ENEMY_LAYER = 4
WATER_LAYER = 3
HEALTH_LAYER = 7
WEAPON_LAYER = 5

PLAYER_SPEED = 3
ENEMY_SPEED = 1.5
BULLET_SPEED = 6

ENEMY_HEALTH = 6
PLAYER_HEALTH = 10

BLACK = (0, 0, 0)
RED = (255, 0, 0)
GREEN = (0, 255, 0)

PARTICLE_COLOR = (255, 255, 255)


def load_tilemap_from_csv(path):
    with open(path, newline='') as csvfile:
        tilemap = [row for row in csv.reader(csvfile)]
        tilemap2 = []
        for line in tilemap:
            tilemap2.append(line[0])

        return tilemap2
    

    
def ensure_player_spawn(tilemap):
    has_player = any('P' in row for row in tilemap)
    if not has_player:
        for y, row in enumerate(tilemap):
            for x, cell in enumerate(row):
                if cell == ' ':
                    row[x] = 'P'
                    return  # Exit once placed

world_output()  # Generate the world and save to CSV

tilemap = load_tilemap_from_csv("map.csv")

ensure_player_spawn(tilemap)


        
# tilemap = [
#     'BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB',
#     'B...........................................RRRR...................................................B',
#     'B....B.....E.......E ......................RRRRRR..................................................B',
#     'B.....................RRRR................RRRRR....................................................B',
#     'B....R................RRRRR........................................................................B',
#     'B........BB...........RRRRRR.........BB............................................................B',
#     'B.....................................BBB..........................................................B',
#     'B..................B..............B................................................................B',
#     'B.....BBB.......R..................................................................................B',
#     'B............E.RR..................................................................................B',
#     'B...............R..................................................................................B',
#     'B.....E......R.....................................................................................B',
#     'B..................................................................................................B',
#     'B.........................BBBB.....................................................................B',
#     'B........................BBBBBB....................................................................B',
#     'B........................BBBB......................................................................B',
#     'B.........................BB.......................................................................B',
#     'B..................................................................................................B',
#     'B............................P.W...................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'B..................................................................................................B',
#     'BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBbBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB',
# ]

